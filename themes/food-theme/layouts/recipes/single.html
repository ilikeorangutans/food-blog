{{ define "main" }}
<section class="post">
  <header class="post-header">
    <h2 class="post-title">
      {{ .Title }}
    </h2>
    <p class="post-meta">
      Posted on <em>{{ .Date.Format "January 2, 2006" }}</em>
      {{ if not (eq .Date .Lastmod) }}
      <strong>and last updated on <em>{{ .Lastmod.Format "January 2, 2006" }}</em></strong>
      {{ end -}}
      {{- if .Params.tags }}, tagged {{ range $tag := .Params.tags }}<a class="post-category" href="/tags/{{ $tag | urlize }}">{{ $tag }}</a>{{ end }}
      {{ end }}
    </p>
  </header>
</section>
{{ with .Resources.ByType "image" }}
<h1 class="content-subhead">Photos</h1>
<div class="post-description">
  <div class="post-images pure-g">
    {{ range . }}
    {{ $image := .Resize "500x375" }}
    {{ $largeImage := .Resize "1280x" }}
    <div class="pure-u-1 pure-u-md-1-2">
      <a href="{{ $largeImage.RelPermalink }}">
        <img alt="{{ $image.Title }}"
             class="pure-img-responsive"
             src="{{ $image.RelPermalink }}">
      </a>
    </div>
    {{ end }}
  </div>
</div>
{{ end }}
<h1 class="content-subhead">Overview</h1>
<section class="post ingredients">
  <div class="content">
    {{ with .Params.yields }}
    <p>Yields: {{ . }}</p>
    {{ end }}
    <p>
      {{ .Content }}
    </p>
  </div>
</section>
{{ with .Params.ingredients }}
<h1 class="content-subhead">Ingredients</h1>
<section class="post ingredients">
  <table class="table is-fullwidth">
    {{ range . }}
    {{ $ingredient := index $.Site.Data.ingredients .name }}
    <tr>
      <td>
        {{ .amount | safeHTML }}
      </td>
      <td>
        {{ with .unit }}
          {{ $unit := index $.Site.Data.units . }}
          {{ $unit.short }}
        {{ else }}
        {{ index $ingredient "default-unit" }}
        {{ end }}
      </td>
      <td>
        {{ $ingredient.title }}
      </td>
      <td>
        {{ .notes }}
      </td>
    </tr>
    {{ end }}
  </table>
</section>
{{ end }}
{{ with .Params.method }}
<h1 class="content-subhead">Method</h1>
<section class="post method">
  <div class="post-description">
    <ol>
      {{ range . }}
      <li>
        {{ .description }}
      </li>
      {{ end }}
    </ol>
  </div>
</section>
{{ end }}
{{ end }}
